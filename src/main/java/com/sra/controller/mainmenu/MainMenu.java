package com.sra.controller.mainmenu;import com.sra.config.Config;import com.sra.controller.Menu;import com.sra.controller.MenuButton;import com.sra.util.UtilitiesToolSet;import lombok.RequiredArgsConstructor;import org.springframework.context.ApplicationContext;import org.springframework.context.annotation.AnnotationConfigApplicationContext;import org.springframework.stereotype.Component;import java.io.IOException;import java.util.List;@RequiredArgsConstructor@Componentpublic class MainMenu implements Menu {    private final UtilitiesToolSet utilitiesToolSet;    private final MainMenuButtonsList mainMenuButtonsList;    @Override    public void startMenu() throws IOException {        System.out.println("\nWelcome to SpaceReservationApp on Spring! Please log in:");        List<MenuButton> list = mainMenuButtonsList.get();        for (MenuButton menuButton : list) {            System.out.print(list.indexOf(menuButton)+1);            menuButton.show();        }        String userInput = utilitiesToolSet.getReader().readLine();        MenuButton pushedButton = null;        if (utilitiesToolSet.getMenuInputValidator().isValidMenuInput(userInput, mainMenuButtonsList.get())) {            try {                pushedButton = mainMenuButtonsList.get().get(Integer.parseInt(userInput) - 1);            }            catch (ArrayIndexOutOfBoundsException e) {                System.out.println(Config.RED_COLOUR + "Wrong input! Please choose one of the options" + Config.RESET_COLOUR);                this.startMenu();            }            if (pushedButton != null) {                pushedButton.onPush();                if (pushedButton.getCommand().returnToMenuAfterExecution()) startMenu();            }        }        else {            System.out.println(Config.RED_COLOUR + "Wrong input! Please choose one of the options" + Config.RESET_COLOUR);            this.startMenu();        }    }    public static void main(String[] args) throws IOException {        ApplicationContext context = new AnnotationConfigApplicationContext(Config.class);        MainMenu mainMenu = context.getBean(MainMenu.class);        mainMenu.startMenu();    }}